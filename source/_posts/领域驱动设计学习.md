---
title: 领域驱动设计学习
date: 2021-11-04 23:27:21
tags:
  - Java
  - 架构设计
categories:
  - 后端
description: DDD（Domain-Driven Design 领域驱动设计）是由Eric Evans最先提出，目的是对软件所涉及到的领域进行建模，以应对系统规模过大时引起的软件复杂性的问题。
top_img: https://file.buildworld.cn/img/20210906094058.jpeg
cover: https://file.buildworld.cn/img/20211104233820.png
comments: false
keywords: DDD
---

小傅哥博客读后感：[https://bugstack.cn](https://bugstack.cn/)

## 一、初识领域驱动设计

### 1、介绍

> **DDD（Domain-Driven Design 领域驱动设计）**是由 Eric Evans 最先提出，目的是对软件所涉及到的领域进行建模，以应对系统规模过大时引起的软件复杂性的问题。整个过程大概是这样的，开发团队和领域专家一起通过 通用语言(Ubiquitous Language)去理解和消化领域知识，从领域知识中提取和划分为一个一个的子领域（核心子域，通用子域，支撑子域），并在子领域上建立模型，再重复以上步骤，这样周而复始，构建出一套符合当前领域的模型。

![](https://file.buildworld.cn/img/20211104225640.png)

> 依靠领域驱动设计的设计思想，通过事件风暴建立领域模型，合理划分领域逻辑和物理边界，建立领域对象及服务矩阵和服务架构图，定义符合 DDD 分层架构思想的代码结构模型，保证业务模型与代码模型的一致性。通过上述设计思想、方法和过程，指导团队按照 DDD 设计思想完成微服务设计和开发。
>
> 1. 拒绝泥球小单体、拒绝污染功能与服务、拒绝一加功能排期一个月
> 2. 架构出高可用极易符合互联网高速迭代的应用服务
> 3. 物料化、组装化、可编排的服务，提高人效

### 2、服务架构

![四层架构](https://file.buildworld.cn/img/20211104225650.png)

#### 应用层{application}

> 1. 应用服务位于应用层。用来表述应用和用户行为，负责服务的组合、编排和转发，负责处理业务用例的执行顺序以及结果的拼装。
> 2. 应用层的服务包括应用服务和领域事件相关服务。
> 3. 应用服务可对微服务内的领域服务以及微服务外的应用服务进行组合和编排，或者对基础层如文件、缓存等数据直接操作形成应用服务，对外提供粗粒度的服务。
> 4. 领域事件服务包括两类：领域事件的发布和订阅。通过事件总线和消息队列实现异步数据传输，实现微服务之间的解耦。

#### 领域层{domain}

> 1. 领域服务位于领域层，为完成领域中跨实体或值对象的操作转换而封装的服务，领域服务以与实体和值对象相同的方式参与实施过程。
> 2. 领域服务对同一个实体的一个或多个方法进行组合和封装，或对多个不同实体的操作进行组合或编排，对外暴露成领域服务。领域服务封装了核心的业务逻辑。实体自身的行为在实体类内部实现，向上封装成领域服务暴露。
> 3. 为隐藏领域层的业务逻辑实现，所有领域方法和服务等均须通过领域服务对外暴露。
> 4. 为实现微服务内聚合之间的解耦，原则上禁止跨聚合的领域服务调用和跨聚合的数据相互关联。

#### 基础层{infrastructrue}

- 基础服务位于基础层。为各层提供资源服务（如数据库、缓存等），实现各层的解耦，降低外部资源变化对业务逻辑的影响。

- 基础服务主要为仓储服务，通过依赖反转的方式为各层提供基础资源服务，领域服务和应用服务调用仓储服务接口，利用仓储实现持久化数据对象或直接访问基础资源。

- ```xml
  向其他层提供 通用的 技术能力(比如工具类,第三方库类支持,常用基本配置,数据访问底层实现)
  基础实施层主要包含以下的内容:
      * 为应用层 传递消息(比如通知)
      * 为领域层 提供持久化机制(最底层的实现)
      * 为用户界面层 提供组件配置
      * 基础设施层还能够通过架构框架来支持四个层次间的交互模式。
  ```

#### 接口层{interfaces}

- 接口服务位于用户接口层，用于处理用户发送的 Restful 请求和解析用户输入的配置文件等，并将信息传递给应用层。

### 3、DDD 代码落地

![](https://file.buildworld.cn/img/20211104232530.png)
